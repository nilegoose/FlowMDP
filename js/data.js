const l_task_dim = [
	{
		source: 0,
		target: 5,
		value: 1.3333333333333333,
	},
	{
		source: 0,
		target: 6,
		value: 6.0,
	},
	{
		source: 0,
		target: 7,
		value: 5.333333333333333,
	},
	{
		source: 1,
		target: 5,
		value: 1,
	},
	{
		source: 1,
		target: 6,
		value: 4.0,
	},
	{
		source: 1,
		target: 7,
		value: 4.0,
	},
	{
		source: 2,
		target: 5,
		value: 1,
	},
	{
		source: 2,
		target: 6,
		value: 3.3333333333333335,
	},
	{
		source: 2,
		target: 7,
		value: 2.6666666666666665,
	},
	{
		source: 3,
		target: 6,
		value: 2.0,
	},
	{
		source: 3,
		target: 7,
		value: 2.6666666666666665,
	},
	{
		source: 4,
		target: 5,
		value: 1.3333333333333333,
	},
	{
		source: 4,
		target: 6,
		value: 3.3333333333333335,
	},
	{
		source: 4,
		target: 7,
		value: 2.0,
	},
];
const l_dim_abstract = [
	{
		source: 5,
		target: 8,
		value: 1,
	},
	{
		source: 6,
		target: 9,
		value: 5,
	},
	{
		source: 6,
		target: 12,
		value: 1,
	},
	{
		source: 7,
		target: 10,
		value: 6,
	},
	{
		source: 7,
		target: 11,
		value: 6,
	},
	{
		source: 7,
		target: 13,
		value: 6,
	},
];
const l_abstract_chart = [
	{
		source: 8,
		target: 14,
		value: 1,
	},
	{
		source: 8,
		target: 27,
		value: 1,
	},
	{
		source: 9,
		target: 17,
		value: 1,
	},
	{
		source: 9,
		target: 15,
		value: 1,
	},
	{
		source: 9,
		target: 16,
		value: 1,
	},
	{
		source: 9,
		target: 18,
		value: 1,
	},
	{
		source: 9,
		target: 20,
		value: 1,
	},
	{
		source: 9,
		target: 21,
		value: 1,
	},
	{
		source: 9,
		target: 23,
		value: 1,
	},
	{
		source: 9,
		target: 24,
		value: 1,
	},
	{
		source: 9,
		target: 25,
		value: 1,
	},
	{
		source: 9,
		target: 26,
		value: 1,
	},
	{
		source: 10,
		target: 17,
		value: 1,
	},
	{
		source: 10,
		target: 15,
		value: 1,
	},
	{
		source: 10,
		target: 16,
		value: 1,
	},
	{
		source: 10,
		target: 18,
		value: 1,
	},
	{
		source: 10,
		target: 19,
		value: 1,
	},
	{
		source: 10,
		target: 20,
		value: 1,
	},
	{
		source: 10,
		target: 21,
		value: 1,
	},
	{
		source: 10,
		target: 22,
		value: 1,
	},
	{
		source: 10,
		target: 23,
		value: 1,
	},
	{
		source: 10,
		target: 24,
		value: 1,
	},
	{
		source: 10,
		target: 25,
		value: 1,
	},
	{
		source: 10,
		target: 26,
		value: 1,
	},
	{
		source: 11,
		target: 17,
		value: 1,
	},
	{
		source: 11,
		target: 15,
		value: 1,
	},
	{
		source: 11,
		target: 16,
		value: 1,
	},
	{
		source: 11,
		target: 18,
		value: 1,
	},
	{
		source: 11,
		target: 19,
		value: 1,
	},
	{
		source: 11,
		target: 20,
		value: 1,
	},
	{
		source: 11,
		target: 21,
		value: 1,
	},
	{
		source: 11,
		target: 22,
		value: 1,
	},
	{
		source: 11,
		target: 23,
		value: 1,
	},
	{
		source: 11,
		target: 24,
		value: 1,
	},
	{
		source: 11,
		target: 25,
		value: 1,
	},
	{
		source: 11,
		target: 26,
		value: 1,
	},
	{
		source: 12,
		target: 14,
		value: 1,
	},
	{
		source: 12,
		target: 27,
		value: 1,
	},
	{
		source: 13,
		target: 17,
		value: 1,
	},
	{
		source: 13,
		target: 15,
		value: 1,
	},
	{
		source: 13,
		target: 16,
		value: 1,
	},
	{
		source: 13,
		target: 18,
		value: 1,
	},
	{
		source: 13,
		target: 19,
		value: 1,
	},
	{
		source: 13,
		target: 20,
		value: 1,
	},
	{
		source: 13,
		target: 21,
		value: 1,
	},
	{
		source: 13,
		target: 22,
		value: 1,
	},
	{
		source: 13,
		target: 23,
		value: 1,
	},
	{
		source: 13,
		target: 24,
		value: 1,
	},
	{
		source: 13,
		target: 25,
		value: 1,
	},
	{
		source: 13,
		target: 26,
		value: 1,
	},
];

const l_chart_encode = [
	{
		source: 23,
		target: 28,
		value: 1,
	},
	{
		source: 27,
		target: 28,
		value: 1,
	},
	{
		source: 14,
		target: 28,
		value: 1,
	},
	{
		source: 15,
		target: 28,
		value: 1,
	},
	{
		source: 24,
		target: 28,
		value: 1,
	},
	{
		source: 25,
		target: 28,
		value: 1,
	},
	{
		source: 21,
		target: 28,
		value: 1,
	},
	{
		source: 26,
		target: 28,
		value: 1,
	},
	{
		source: 19,
		target: 28,
		value: 1,
	},
	{
		source: 15,
		target: 29,
		value: 1,
	},
	{
		source: 23,
		target: 30,
		value: 1,
	},
	{
		source: 27,
		target: 30,
		value: 1,
	},
	{
		source: 14,
		target: 30,
		value: 1,
	},
	{
		source: 15,
		target: 30,
		value: 1,
	},
	{
		source: 24,
		target: 30,
		value: 1,
	},
	{
		source: 25,
		target: 30,
		value: 1,
	},
	{
		source: 21,
		target: 30,
		value: 1,
	},
	{
		source: 16,
		target: 30,
		value: 1,
	},
	{
		source: 17,
		target: 30,
		value: 1,
	},
	{
		source: 26,
		target: 30,
		value: 1,
	},
	{
		source: 19,
		target: 30,
		value: 1,
	},
	{
		source: 23,
		target: 31,
		value: 1,
	},
	{
		source: 27,
		target: 31,
		value: 1,
	},
	{
		source: 25,
		target: 31,
		value: 1,
	},
	{
		source: 17,
		target: 31,
		value: 1,
	},
	{
		source: 26,
		target: 31,
		value: 1,
	},
	{
		source: 19,
		target: 31,
		value: 1,
	},
	{
		source: 14,
		target: 32,
		value: 1,
	},
	{
		source: 24,
		target: 32,
		value: 1,
	},
	{
		source: 21,
		target: 32,
		value: 1,
	},
	{
		source: 15,
		target: 34,
		value: 1,
	},
	{
		source: 23,
		target: 35,
		value: 1,
	},
	{
		source: 27,
		target: 35,
		value: 1,
	},
	{
		source: 24,
		target: 35,
		value: 1,
	},
	{
		source: 26,
		target: 35,
		value: 1,
	},
	{
		source: 18,
		target: 28,
		value: 1,
	},
	{
		source: 20,
		target: 30,
		value: 1,
	},
	{
		source: 20,
		target: 32,
		value: 1,
	},
	{
		source: 22,
		target: 33,
		value: 1,
	},
];
function getData() {
	let combinedList = [
		...l_task_dim,
		...l_dim_abstract,
		...l_abstract_chart,
		...l_chart_encode,
	];
	return {
		links: combinedList,
	};
}
function getData2() {
	let combinedList = [...link1_3, ...link3_2];
	return {
		links: combinedList,
	};
}

// labels

const types = [
		"Density plot",
		"Scatterplot",
		"Heatmap",
		"Dendrogram",
		"Voronoi diagram",
		"Parallel coordinates",
		"Contour plot",
		"2D density plot",
		"Radial chart",
		"Box plot",
		"Violin plot",
		"Line plot",
		"Bar chart",
		"Histogram",
	],
	tasks = [
		"Cluster Identification",
		"Anomaly Detection",
		"Distance Preservation",
		"Global Structure",
		"Class Separation",
	],
	dimensions = ["1D", "2D", "N-D"],
	attributes = [
		"One Numeric",
		"Two Numeric",
		"Three Numeric",
		"Several Numeric",
		"One Num, One Cat",
		"One Cat, Several Num",
	],
	encoding = [
		"Position",
		"Point",
		"Color",
		"Line",
		"Size(area)",
		"Angle",
		"Shape",
		"Length",
	];

const column_1 = tasks,
	column_2 = dimensions,
	column_3 = attributes,
	column_4 = types,
	column_5 = encoding;
const task_charts = [
	[1, 4, 0, 7, 6, 3, 2, 8, 13, 12],
	[2, 1, 9, 10, 5, 13, 12],
	[1, 6, 2, 11, 13],
	[5, 2, 11, 12],
	[6, 4, 0, 12, 13],
];

function locateChartColumn() {
	if (column_2 == types) {
		return 2;
	} else if (column_3 == types) {
		return 3;
	} else if (column_4 == types) {
		return 4;
	}
}

function locateAttributesColumn() {
	if (column_3 == attributes) {
		return 3;
	} else {
		return -1;
	}
}

function locateDimensionColumn() {
	if (column_2 == dimensions) {
		return 2;
	} else if (column_3 == dimensions) {
		return 3;
	}
}

const chartCol = locateChartColumn();
const dimCol = locateDimensionColumn();
const attriCol = locateAttributesColumn();
const encodeCol = 5;
const taskCol = 1;

// colors for each column
const colorCol2 = ["#b2e2e2", "#66c2a4", "#2ca25f", "#006d2c"],
	colorCol1 = ["#c51b7d", "#377eb8", "#984ea3", "#ff7f00", "#a65628"],
	colorCol3 = [
		"#a6cee3",
		"#1f78b4",
		"#b2df8a",
		"#33a02c",
		"#fb9a99",
		"#e31a1c",
		"#fdbf6f",
		"#ff7f00",
		"#cab2d6",
		"#6a3d9a",
	],
	colorCol4 = [
		"#1b9e77",
		"#d95f02",
		"#7570b3",
		"#e7298a",
		"#66a61e",
		"#e6ab02",
		"#a6761d",
		"#666666",
	];

const colorColAb = [
	"#bdd7e7",
	"#6baed6",
	"#3182bd",
	"#08519c",
	"#b8a0c3",
	"#a6747c",
];
/*----------------------------------------------------------------------------------- */
const colorFunctions = ["#5ab4ac", "#d8b365"];
const nameFunctions = ["Data1", "Data2"];

/*------------------------------------------------------------------------------------ */

var buttonTexts = [
	"Tasks",
	"Dimensions",
	"Data Abstraction",
	"Chart Types",
	"Encoding Idioms",
];

/*------------------------------------------------------------------------------------- */
// for the tooltip
var abstract_dict = {
	"One Numeric": 2,
	"Two Numeric": 10,
	"Three Numeric": 12,
	"Several Numeric": 12,
	"One Num, One Cat": 2,
	"One Cat, Several Num": 12,
};

var dim_dict = { "1D": 2, "2D": 12, 'N-D': 12 };

var task_dict = {
	"Cluster Identification": 10,
	"Anomaly Detection": 7,
	"Distance Preservation": 5,
	"Global Structure": 4,
	"Class Separation": 5,
};

/*------------------------------------------------------------------------------------------ */

// transfer data to object
var DataObj = (function () {
	var data;

	var sankey;

	function initialize() {
		return {
			data: data_process(),

			sankey: d3.sankey().nodeWidth(15).nodePadding(10).size([width, height]),

			updateData: function (newValue) {
				this.data = newValue;
			},

			updateNodes: function (newValue) {
				this.data.nodes = newValue;
			},

			getData: function () {
				return this.data;
			},

			updateSankey: function (newValue) {
				this.sankey = newValue;
			},

			getSankey: function () {
				return this.sankey;
			},
		};
	}

	return {
		getData: function () {
			if (!data) {
				data = initialize();
			}
			return data;
		},
		getSankey: function () {
			return sankey;
		},
	};
})();

// TODO
// limit max - height of chart on big screen
// discrete selection (?)
// data
